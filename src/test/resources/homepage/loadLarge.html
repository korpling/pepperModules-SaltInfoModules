<html>
	<head>
		<script src="dist/libs/jquery.js" type="text/javascript"></script>
		<script>
			var data = 	'{' +
						'"pos": ['+
						'{"value":"VVFIN", "occurance":"1"},'+
						'{"value":"ADJD", "occurance":"1"},'+
						'{"value":"ADJA", "occurance":"1"},'+
						'{"value":"NN", "occurance":"1"},'+
						'{"value":"ADV", "occurance":"1"},'+
						'{"value":"MORE1", "occurance":"10"},'+
						'{"value":"MORE2", "occurance":"10"},'+
						'{"value":"MORE3", "occurance":"10"},'+
						'{"value":"MORE4", "occurance":"10"},'+
						'{"value":"MORE5", "occurance":"10"},'+
						'{"value":"MORE6", "occurance":"10"},'+
						'{"value":"MORE7", "occurance":"10"},'+
						'{"value":"MORE8", "occurance":"10"},'+
						'{"value":"MORE9", "occurance":"10"},'+
						'{"value":"MORE10", "occurance":"10"},'+
						'{"value":"MORE11", "occurance":"10"},'+
						'{"value":"MORE12", "occurance":"10"},'+
						'{"value":"MORE13", "occurance":"10"},'+
						'{"value":"MORE14", "occurance":"10"},'+
						'{"value":"MORE15", "occurance":"10"},'+
						'{"value":"MORE16", "occurance":"11"}'+
						'],'+
						'"lemma": ['+
						'{"value":"sein", "occurance":"1"},'+
						'{"value":"haben", "occurance":"1"},'+
						'{"value":"Haus", "occurance":"1"},'+
						'{"value":"Maus", "occurance":"1"},'+
						'{"value":"Stuhl", "occurance":"1"},'+
						'{"value":"Tisch", "occurance":"10"},'+
						'{"value":"Bein", "occurance":"10"},'+
						'{"value":"Tasse", "occurance":"10"},'+
						'{"value":"Monitor", "occurance":"10"},'+
						'{"value":"gehen", "occurance":"10"},'+
						'{"value":"clicken", "occurance":"10"},'+
						'{"value":"spielen", "occurance":"11"}'+
						']'+
						'}';
		
		var NUM_OF_SET_VALUES= 5;
		var obj = JSON.parse(data);
		
		function expandValues(annoName){
			var td= document.getElementById(annoName+"_values");
			var span= td.children[0];
			var slot= obj[annoName];
			for (var i= NUM_OF_SET_VALUES; i< slot.length;i++){
				var newSpan= span.cloneNode(true);
				newSpan.children[0].innerHTML= slot[i].value;
				newSpan.children[1].innerHTML= slot[i].occurance;
				td.appendChild(newSpan);
			}
			
			var $btn= $("#"+annoName+"_btn");
			$btn.text("C")
			$btn.unbind('click');
			$btn.attr("onclick","collapseValues('"+annoName+"')");
		}
		
		function collapseValues(annoName){
			var td= document.getElementById(annoName+"_values");
			if (td.children.length > NUM_OF_SET_VALUES){
				//for better performance, first collect all items to be removed and make batch remove
				var $removalList= $();
				for (var i= NUM_OF_SET_VALUES; i< td.children.length;i++){
					try{
						$removalList = $removalList.add(td.children[i]);
					}catch(err) {
						console.log(err.message);
					}
				}
				$removalList.remove();
			}
			
			var $btn= $("#"+annoName+"_btn");
			$btn.text("E");
			$btn.unbind('click');
			$btn.attr("onclick","expandValues('"+annoName+"')");
		}
		
		
		</script>
	</head>
	<body>
		<h1 id="h1">MyCorpus</h1>
		<table width="100%" border="1">
			 <thead>
                    <th>Name</th>
                    <th>Counts
                    </th>
                </thead>
			 <tbody>
				    <tr class="odd">
                        <td class="anno_Name">
                            <span class="sannotationinfo">
                                <span class="sannotationinfo-sname">POS</span>
                                <span class="sannotationinfo-count">23</span>
                            </span>
                            <button id="pos_btn" onClick="expandValues('pos')">E</button>
                        </td>
                        <td id="pos_values">
                            <span class="svalue">
                                <span class="svalue-text">VVFIN</span>
                                <span class="svalue-occurrences">10</span>
                            </span>
                            <span class="svalue">
                                <span class="svalue-text">ADJD</span>
                                <span class="svalue-occurrences">11</span>
                            </span>
                            <span class="svalue">
                                <span class="svalue-text">NN</span>
                                <span class="svalue-occurrences">14</span>
                            </span>
                            <span class="svalue">
                                <span class="svalue-text">DET</span>
                                <span class="svalue-occurrences">24</span>
                            </span>
                            <span class="svalue">
                                <span class="svalue-text">ADV</span>
                                <span class="svalue-occurrences">8</span>
                            </span>
                        </td>
                    </tr>
                    <tr class="even">
                        <td class="anno_Name">
                            <span class="sannotationinfo">
                                <span class="sannotationinfo-sname">Lemma</span>
                                <span class="sannotationinfo-count">23</span>
                            </span>
                            <button id="lemma_btn" onClick="expandValues('lemma')">E</button>
                        </td>
                        <td id="lemma_values">
                            <span class="svalue">
                                <span class="svalue-text">sein</span>
                                <span class="svalue-occurrences">30</span>
                            </span>
                            <span class="svalue">
                                <span class="svalue-text">haben</span>
                                <span class="svalue-occurrences">11</span>
                            </span>
                            <span class="svalue">
                                <span class="svalue-text">Haus</span>
                                <span class="svalue-occurrences">14</span>
                            </span>
                            <span class="svalue">
                                <span class="svalue-text">Maus</span>
                                <span class="svalue-occurrences">24</span>
                            </span>
                            <span class="svalue">
                                <span class="svalue-text">Stuhl</span>
                                <span class="svalue-occurrences">8</span>
                            </span>
                        </td>
                    </tr>
                </tbody>
		</table>
	</body>
</html>
